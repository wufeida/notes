# Git版本回退
## 1）没有push到线上的回退方法
#### 用`git log`可以查看提交历史，以便确定要回退到哪个版本。
> git reflog 或者 git log

#### 回退版本
> git reset --hard Obfafd （要回退的commit id 前几位就可以）

#### 继续查看本地代码 发现回退回去了 现在又后悔了 想回到原来的最新版本 怎么办
> git log

#### 发现最新的日志不在了 不要慌 使用历史提交命令
> git reflog

#### 找到想恢复的commit id 继续使用
> git reset --hard Obfafd （要回退的commit id 前几位就可以）

#### 再看看代码 不错 代码又回来了
## 2）已经推送到线上的回退方法
### 1、 自己的远程分支
> git relog
> git reset --hard Obfafd（要回退的commit id 前几位就可以） 

#### 到这里和上面的都一样 接下来要只执行下下面
> git push -f 

#### 注意：本地分支回滚后，版本将落后远程分支，必须使用强制推送覆盖远程分支，否则无法推送到远程分支
### 2、 公共远程分支版本回退的方法
 ```
 git revert HEAD     //撤销最近一次提交
 git revert HEAD~1   //撤销上上次的提交，注意：数字从0开始
 git revert 0ffaacc  //撤销0ffaacc这次提交
```
#### 命令`git revert`意思是撤销某次提交。它会产生一个新的提交，虽然代码回退了，但是版本依然是向前的,但是，需要注意一下几点
```
revert 是撤销一次提交，所以后面的commit id是你需要回滚到的版本的前一次提交
使用revert HEAD是撤销最近的一次提交，如果你最近一次提交是用revert命令产生的，那么你再执行一次，就相当于撤销了上次的撤销操作，换句话说，你连续执行两次revert HEAD命令，就跟没执行是一样的
使用revert HEAD~1 表示撤销最近2次提交，这个数字是从0开始的，如果你之前撤销过产生了commi id，那么也会计算在内的。
如果使用 revert 撤销的不是最近一次提交，那么一定会有代码冲突，需要你合并代码，合并代码只需要把当前的代码全部去掉，保留之前版本的代码就可以了.
```
#### revert 合并代码，解决冲突，使用revert命令，如果不是撤销的最近一次提交，那么一定会有冲突，如下所示：
```
添加新的
第二次
<<<<<<< HEAD
第三次
第四次
=======
>>>>>>> parent of 55d4fd0... 三次
```
#### 解决冲突很简单，因为我们只想撤回某次提交，因此需要把当前最新的代码去掉即可，只用删除掉你不想要的代码就可以，把别人或者你想留下的代码留下：
```
<<<<<<< HEAD
第三次
第四次
=======
>>>>>>> parent of 55d4fd0... 三次
```
#### 去掉之后，然后再进行一次提交推送就可以了
## 3）总结
#### 远程回滚的三种情况
```
自己的分支回滚直接用reset
公共分支回滚用revert
错的太远了直接将代码全部删掉，用正确代码替代
```
### `git reset` 是把HEAD指向到哪次提交 整个回退都某一个状态
### `git revert` 是撤销掉哪次提交 只撤销掉某一次提交的内容，想撤销最新提交的 `git revert HEAD`
### `git revert --abort` 不想解决冲突 终止回退

## 参考网站
> https://www.liaoxuefeng.com/wiki/0013739516305929606dd18361248578c67b8067c8c017b000/0013744142037508cf42e51debf49668810645e02887691000/

> http://blog.csdn.net/fuchaosz/article/details/52170105